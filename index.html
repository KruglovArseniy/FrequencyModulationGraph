<head>
    <title>Частотная модуляция</title>

    <style>
        *
        {
            font-family: GoogleSans, Segoe UI, Arial;
        }

        *:focus
        {
            outline: 0;
        }

        body
        {
            display: flex;
            flex-flow: column;
            width: 100%;
            height: 100%;
            margin: 0;
        }

        .inputs
        {
            padding: 10px;
        }

        .canvas
        {
            padding: 10px;
            flex-grow: 1;
        }

        input[type = text]
        {
            font-size: 150%;
            width: 100%;
            border: 1px solid #D2D2D2;
            border-radius: 10px;
            padding: 5px 10px;
        }

        input[type = text]:focus
        {
            border: 1px solid #D2D2D2;
        }

        canvas
        {
            border: 1px solid #D2D2D2;
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <div class='inputs'>
        <input type='text' placeholder='Введите текст' oninput='Draw(this)'>
    </div>

    <div class='canvas'>
        <canvas id='canvas'></canvas>
    </div>
</body>

<script>
    width = document.getElementsByClassName('canvas')[0].clientWidth - 22;
    height = document.getElementsByClassName('canvas')[0].clientHeight - 25;

    canvas = document.getElementById('canvas');
    canvas.setAttribute ('width', width);
    canvas.setAttribute ('height', height);

    function Draw(input)
    {
        width = document.getElementsByClassName('canvas')[0].clientWidth - 22;

        frequency = 1;
        string = input.value;
        binary_string = '';

        for (i = 0; i < string.length; i++)
            binary_string += '0' + string.charCodeAt(i).toString(2);

        scale = 5;
        
        context = document.getElementById('canvas').getContext('2d');

        context.clearRect(0, 0, canvas.width, canvas.height);
        context.beginPath();
        context.moveTo(0, height / 2);

        for (x = 0; x < width; x++)
        {
            if ((binary_string[Math.trunc(x * frequency / 2 / Math.PI / scale)] == '0') || (binary_string[Math.trunc(x * frequency / 2 / Math.PI / scale)] == undefined))
                value = 0;
            else
                value = Math.sin(x * frequency / scale);

            context.lineTo(x, height / 2 - scale * value);
        }

        context.stroke();
    }
</script>